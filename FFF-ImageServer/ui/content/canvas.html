<!DOCTYPE html>
<body>

		 <!-- Header Area wrapper Starts -->
	<header id="newbarheader">
        <nav id="newbarvar">
                <a href="{{ @BASE }}" class="navbar-brand"><img src="img/logo3.png" alt="" width=130px height=90px></a>
            <div>
                <i class="lni-menu"></i>

                <ul id="inner">
                    <li>
                        <a class="nav-link" href="{{ @BASE }}/selectcanvas">CANVAS</a>
                    </li>
                    <li>
                        <a class="nav-link" href="{{ @BASE }}/view_upload">MAP</a>
                    </li>
                    <li>
                        <a class="nav-link" href="#">COMMUNITY</a>
                    </li>
                </ul>


        </nav>
        <!-- Navbar End -->
      </header>

<div class="intro">
     <div class="info-text2">
		<h2>Paint on your canvas</h2>
</div>
    <div class="brush">
       <input id="color" type="color" value="#ffffff">
       <input id="size" type="range" min="1" max="100" step="1" value="20">
       <input id="opacity" type="number" min="0" max="1" step="0.1" value="0.5" style="text-align: center;">
		<div class="icon">
		<input id="clean" type="image" onclick="clearCanvas()" src="img/clean3.png">
		<input id="save" type="image" src="img/download3.png">
      </div>
	</div>


	<div id="wall" class="team-img">
           <canvas crossorigin="anonymous" id="canvasId" width="1250px" height="590"></canvas>
    </div>
</div>
		  <!-- Footer-->
<footer class="page-footer py-5">
  <div class="container">
    <div class="large text-center text-light">Copyright Â© Grafficities</div>
    <div class="large text-center text-light">Design by xxxxxxxxx_University of Edinburgh</div>
  </div>
</footer>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.19/fabric.min.js"></script>
	<script src="js/fabric-brush.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
    <script src="js/RangeSlider.js"></script>

 <script type="text/javascript" src="js/html2canvas.min.js"></script>
    <script type="text/javascript" src="js/canvas2image.js"></script>
    <script type="text/javascript">

      // set bg
      $(document).ready(function() {
        $('canvas').css('background-image', 'url(img/wall.png)');

      });

      var test = $("#wall").get(0);
      // to canvas
      $('#save').click(function(e) {
        html2canvas(test).then(function(canvas) {
          // canvas width
          var canvasWidth = canvas.width;
          // canvas height
          var canvasHeight = canvas.height;
          // render canvas
          var img = Canvas2Image.convertToImage(canvas, canvasWidth);
          // render image

          // save
            let type = $('#sel').val(); // image type
            let w = $('#imgW').val(); // image width
            let h = $('#imgH').val(); // image height
            let f = $('#imgFileName').val(); // file name
            w = (w === '') ? canvasWidth : w;
            h = (h === '') ? canvasHeight : h;
            // save as image
            Canvas2Image.saveAsImage(canvas, w, h, type, f);
          });
        });

    </script>
	
	

</body>